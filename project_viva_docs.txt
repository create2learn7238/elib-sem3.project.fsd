BOOKHAVEN E-LIBRARY PROJECT DOCUMENTATION & VIVA GUIDE
======================================================

1. PROJECT OVERVIEW
-------------------
Project Name: BookHaven (E-Lib3)
Type: Full-Stack Web Application (E-Library Management System)
Objective: To provide a digital platform where users can browse, search, purchase, and read books (PDFs), while Admins manage the inventory, users, and finances.

2. TECHNICAL STACK
------------------
Frontend:
- HTML5: Structure of the pages.
- CSS Frameworks:
  - Bootstrap 5: Used for Grid system, Modals, Carousels, and Toasts.
  - Tailwind CSS (via CDN): Used for utility styling (colors, spacing, glass-morphism).
- JavaScript (Vanilla): Handles logic (API fetching, DOM manipulation, LocalStorage).

Backend (Inferred):
- Node.js & Express.js: API endpoints.
- Database: MySQL or PostgreSQL (relational data).

Storage:
- LocalStorage: Stores logged-in user session and cart data on the client side.

3. WORKFLOW
-----------
A. User Module (index.html, profile.html)
- Authentication: Register/Login. User object saved to LocalStorage.
- Browsing: Fetches books from API. Client-side search filters books instantly.
- Cart & Payments: 
  - Cart stored in LocalStorage.
  - Simulated Payment Gateway (Card & QR Code).
- Profile: Displays user details and "My Bookshelf" (filtered transaction history).

B. Admin Module (admin.html)
- Security: Checks `if (user.role !== 'admin')` on load.
- Dashboard: Links to Manage Books, Users, Payments, Carousel.
- Manage Books: CRUD operations via API.

4. COUNTER-EXAMINER QUESTIONS (VIVA VOCE)
-----------------------------------------

Q1: Why use both Bootstrap and Tailwind CSS?
A: Bootstrap is used for complex components (Modals, Carousel) to save time. Tailwind is used for rapid, custom styling (colors, glass effects) that Bootstrap lacks.

Q2: How does Search work?
A: It is Client-Side Search. All books are fetched once on load. When typing, JavaScript filters the local array. It's fast but uses more memory if the dataset is huge.

Q3: Is LocalStorage secure for Auth?
A: The JS check is for UI/UX only. Real security is on the Backend API, which verifies tokens/sessions before modifying data.

Q4: How does the Payment System work?
A: It is simulated. Card inputs are validated for format. QR code uses an external API (goqr.me) and polls the server for status updates.

Q5: How does "My Bookshelf" work?
A: It filters the user's transaction history array to exclude 'Membership' entries, showing only 'Book' items.

Q6: Does refreshing the page clear the Cart?
A: No, the cart is saved in LocalStorage, so it persists across refreshes.

Q7: How are files downloaded?
A: A proxy endpoint (`/api/download`) streams the file to the browser to force a download instead of opening it.

5. KEY CODE HIGHLIGHTS
----------------------
- Search Logic: 
  filteredBooks = allBooks.filter(b => b.title.includes(query));

- Admin Security Check: 
  if (!user || user.role !== 'admin') window.location.href = "index.html";

- Dynamic HTML: 
  Uses Template Literals (backticks) for rendering lists efficiently.

- API Integration:
  Uses `fetch()` with `async/await` for asynchronous server communication.

6. DATABASE SCHEMA (Conceptual)
-------------------------------
Based on the frontend data handling, the backend likely uses these tables:
- Users: id, username, email, password (hashed), role, membership_plan, end_date.
- Books: id, title, author, description, price, cover_url, book_url, is_free.
- Transactions: id, user_email, amount, items, date, payment_method, status.

7. FUTURE ENHANCEMENTS (What would you add next?)
-------------------------------------------------
- Real Payment Gateway: Replace simulation with Stripe or Razorpay.
- Server-Side Search: To handle millions of books efficiently.
- Reviews & Ratings: Allow users to rate books.
- Forgot Password: Email integration (Nodemailer) for recovery.

8. COMMON CHALLENGES & SOLUTIONS
--------------------------------
- Challenge: Keeping the Cart UI in sync.
  Solution: Used a centralized `updateCartBadge()` function called after every modification.
  
- Challenge: CORS Errors during API calls.
  Solution: Configured the Node.js backend to allow requests from the frontend origin.

9. ADDITIONAL VIVA QUESTIONS
----------------------------
Q8: How are passwords stored?
A: They should never be stored as plain text. In a real scenario, we use `bcrypt` to hash them before saving to the database.

Q9: What is `async/await` in your code?
A: It makes asynchronous code (like fetching API data) readable and cleaner than using callback hell or `.then()` chains.

Q10 : what is overflow-x-hidden?
A:  Hides extra content and removes the scrollbar entirely.

